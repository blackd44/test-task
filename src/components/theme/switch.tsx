import { useContext, useId } from "react";
import css from "./style.module.scss";
import { ThemeContext } from "./provider";

const ThemeSwitch = () => {
  const id = useId();

  const { colorTheme, setTheme } = useContext(ThemeContext);

  /* istanbul ignore next */
  const handleTheme = () => {
    setTheme && setTheme(colorTheme === "dark" ? "light" : "dark");
  };

  console.log({ colorTheme, setTheme });

  return (
    <span className={css.switch_holder}>
      <span className={css.eye}>
        {colorTheme == "light" ? (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="12"
            viewBox="0 0 16 12"
            fill="none"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M1.11701 6.00003C1.11728 6.00061 1.11756 6.00119 1.11783 6.00177C1.18157 6.13697 1.27966 6.33333 1.41401 6.57042C1.68332 7.04567 2.09499 7.6787 2.66308 8.30991C3.79852 9.57152 5.53171 10.8 7.99998 10.8C10.4683 10.8 12.2015 9.57151 13.3369 8.30991C13.905 7.6787 14.3167 7.04567 14.586 6.57042C14.7203 6.33332 14.8184 6.13697 14.8822 6.00177C14.8824 6.00119 14.8827 6.0006 14.883 6.00003C14.8827 5.99945 14.8824 5.99887 14.8822 5.99829C14.8184 5.86309 14.7203 5.66673 14.586 5.42964C14.3167 4.95438 13.905 4.32136 13.3369 3.69014C12.2015 2.42854 10.4683 1.20003 7.99998 1.20003C5.53171 1.20003 3.79852 2.42854 2.66308 3.69014C2.09499 4.32136 1.68332 4.95438 1.41401 5.42963C1.27966 5.66673 1.18157 5.86308 1.11783 5.99828C1.11756 5.99887 1.11728 5.99945 1.11701 6.00003ZM15.4667 6.00003C15.9619 5.80195 15.9618 5.80172 15.9617 5.80147L15.9614 5.80087L15.9608 5.7993L15.9589 5.79471L15.9528 5.77982C15.9476 5.7674 15.9403 5.75004 15.9308 5.72807C15.9117 5.68414 15.8839 5.62171 15.847 5.54344C15.7732 5.38697 15.663 5.16666 15.514 4.90375C15.2167 4.37901 14.7617 3.6787 14.1297 2.97658C12.8652 1.57152 10.865 0.133362 7.99998 0.133362C5.13493 0.133362 3.13479 1.57152 1.87023 2.97658C1.23833 3.6787 0.78334 4.37901 0.485985 4.90376C0.337007 5.16666 0.226765 5.38697 0.153002 5.54344C0.1161 5.62171 0.0882684 5.68414 0.06923 5.72808C0.0597091 5.75005 0.0523817 5.76741 0.0472137 5.77983L0.0410748 5.79471L0.0392106 5.79931L0.0385783 5.80087L0.0383369 5.80148C0.0382369 5.80172 0.0381453 5.80195 0.533333 6.00003L0.0381453 5.80195C-0.0127151 5.92911 -0.0127151 6.07095 0.0381453 6.1981L0.533333 6.00003C0.0381453 6.1981 0.0382369 6.19833 0.0383369 6.19858L0.0385783 6.19918L0.0392106 6.20075L0.0410748 6.20534L0.0472137 6.22023C0.0523817 6.23265 0.0597091 6.25001 0.06923 6.27198C0.0882684 6.31591 0.1161 6.37834 0.153002 6.45662C0.226765 6.61308 0.337007 6.8334 0.485985 7.0963C0.78334 7.62105 1.23833 8.32136 1.87023 9.02347C3.13479 10.4285 5.13493 11.8667 7.99998 11.8667C10.865 11.8667 12.8652 10.4285 14.1297 9.02348C14.7617 8.32136 15.2167 7.62105 15.514 7.0963C15.663 6.8334 15.7732 6.61309 15.847 6.45662C15.8839 6.37834 15.9117 6.31592 15.9308 6.27198C15.9403 6.25001 15.9476 6.23265 15.9528 6.22023L15.9589 6.20534L15.9608 6.20075L15.9614 6.19918L15.9617 6.19858C15.9618 6.19833 15.9619 6.1981 15.4667 6.00003ZM15.4667 6.00003L15.9619 6.1981C16.0127 6.07095 16.0127 5.9291 15.9619 5.80195L15.4667 6.00003ZM5.33333 6.00003C5.33333 4.52727 6.52724 3.33336 8 3.33336C9.47276 3.33336 10.6667 4.52727 10.6667 6.00003C10.6667 7.47279 9.47276 8.66669 8 8.66669C6.52724 8.66669 5.33333 7.47279 5.33333 6.00003ZM8 4.40003C7.11635 4.40003 6.4 5.11637 6.4 6.00003C6.4 6.88368 7.11635 7.60003 8 7.60003C8.88366 7.60003 9.6 6.88368 9.6 6.00003C9.6 5.11637 8.88366 4.40003 8 4.40003Z"
              fill="#FF868E"
            />
          </svg>
        ) : (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="9"
            viewBox="0 0 16 9"
            fill="none"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M2.66283 3.11C3.79827 4.3716 5.53146 5.60011 7.99973 5.60011C10.468 5.60011 12.2012 4.3716 13.3367 3.11C13.9047 2.47878 14.3164 1.84576 14.5857 1.37051C14.7201 1.13341 14.8182 0.937055 14.8819 0.801856C14.9138 0.734299 14.937 0.682142 14.9518 0.647952C14.9592 0.630861 14.9645 0.618273 14.9677 0.61051L14.971 0.60253L14.9714 0.601682C14.9713 0.60185 14.9712 0.602038 15.4664 0.800114C15.9616 0.998191 15.9615 0.99842 15.9614 0.998669L15.9612 0.99927L15.9605 1.00084L15.9587 1.00543L15.9525 1.02032C15.9474 1.03274 15.94 1.0501 15.9305 1.07207C15.9115 1.116 15.8836 1.17843 15.8467 1.25671C15.773 1.41317 15.6627 1.63348 15.5138 1.89639C15.2164 2.42114 14.7614 3.12144 14.1295 3.82356C13.9344 4.04031 13.7219 4.25784 13.4913 4.47075L15.3102 6.28966L14.556 7.0439L12.6628 5.15074C11.5878 5.92968 10.2211 6.54206 8.53307 6.64989L8.53308 8.80011L7.46642 8.80012L7.4664 6.64989C5.77837 6.54206 4.4117 5.92969 3.33669 5.15075L1.44354 7.0439L0.689295 6.28966L2.50819 4.47076C2.27763 4.25784 2.06506 4.04031 1.86999 3.82356C1.23808 3.12144 0.783092 2.42113 0.485737 1.89639C0.336759 1.63348 0.226516 1.41317 0.152754 1.2567C0.115852 1.17843 0.0880203 1.116 0.0689819 1.07207C0.059461 1.05009 0.0521336 1.03273 0.0469656 1.02032L0.0408267 1.00543L0.0389625 1.00084L0.0383302 0.999268L0.0380888 0.998666C0.0379889 0.998417 0.0378972 0.998188 0.533085 0.800114C1.02827 0.602041 1.0282 0.601852 1.02813 0.601684L1.02804 0.601448L1.02848 0.602532L1.03177 0.610513C1.035 0.618275 1.0403 0.630863 1.04771 0.647954C1.06252 0.682144 1.08573 0.734301 1.11758 0.801859C1.18132 0.937058 1.27941 1.13341 1.41376 1.37051C1.68307 1.84576 2.09474 2.47878 2.66283 3.11ZM1.02799 0.601335C1.02797 0.601293 1.02799 0.601331 1.02804 0.601448L1.02799 0.601335Z"
              fill="#FF868E"
            />
          </svg>
        )}
      </span>
      <input
        type="checkbox"
        defaultChecked={colorTheme == "light"}
        onClick={handleTheme}
        id={id}
        className={css.light_check}
      />
      <label htmlFor={id} className={css.theme_switch}></label>
    </span>
  );
};

export default ThemeSwitch;
